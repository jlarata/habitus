
<ion-content>
  <div class="title">
    <h2>Recetas. Faltó ganas!</h2>
  </div>

  <app-buscador [(busquedaDesplegada)]="busquedaDesplegada" (buttonClicked)="onButtonClicked($event)"></app-buscador>

  <!-- el componente card que se despliega cuando pedís las instrucciones -->
  <ion-card-content *ngIf="isShowingMore">
    <ion-card class="recetaEnDisplay">
      <ion-card-header>
        <ion-card-title>titulo</ion-card-title>
        <img alt="foto de receta" src="{{imagenEnDisplay}}">
      
        <ion-card-subtitle>subtitulo</ion-card-subtitle>


      </ion-card-header>


      <ion-list *ngFor="let step of this.queryDeRecetaForDisplay?.steps!">
        <ion-item>{{step.number}}. {{step.step}}</ion-item>
      </ion-list>

      <ion-button (click)="toggleRecipeSteps()">Volver</ion-button>
    </ion-card>
  </ion-card-content>

  <!-- las cards de las recetas -->

  <div *ngIf="!isShowingMore" class="divDeRecetas">
    <ion-card-content *ngFor=" let receta of queryDeRecetas?.results">
      <ion-card>
        <img alt="foto de {{receta.title}}" src="{{receta.image}}">
        <ion-card-header>
          <ion-card-title>{{receta.title}}</ion-card-title>
          <ion-card-subtitle>subtitulo?</ion-card-subtitle>
        </ion-card-header>
        <ion-card-content *ngIf="queryDeRecetas?.results?.indexOf(receta) == recetaConIngredientes">ingredientes de
          {{receta.title}}

          <div class="ingredients">
            <ul *ngFor="let ingredient of receta.missedIngredients">
              <li>{{ingredient.original}} </li>
            </ul>
          </div>
        </ion-card-content>

        <ion-button *ngIf="queryDeRecetas?.results?.indexOf(receta) != recetaConIngredientes"
          (click)="muestraIngredientes(queryDeRecetas?.results?.indexOf(receta)!)">Mostrar ingredientes</ion-button>
        <ion-button *ngIf="queryDeRecetas?.results?.indexOf(receta) == recetaConIngredientes"
          (click)="ocultaIngredientes()">Ocultar ingredientes</ion-button>
        <ion-button (click)="buscarPorId(receta.id!, receta.image!)">Instrucciones paso a paso</ion-button>
        <ion-button (click)="agregarARecetasFavoritas(receta.id!)">Agregar a Favoritos 😍</ion-button>
        <ion-button (click)="mostrarAgendarReceta = true">Agendar Receta</ion-button>
      </ion-card>
    </ion-card-content>
  </div>

  <ion-button *ngIf="queryDeRecetas != undefined" (click)="blanquearRecetas()">borrar búsqueda</ion-button>

<!--   en test: recetas favoritas  
 -->
  <div *ngIf="recetasFavoritas?.length != 0" class="divDeRecetas">
    <h1>Recetas Favoritas: {{ recetasFavoritas?.length +1}}</h1>
    
    <ion-card-content *ngFor=" let receta of recetasFavoritas">
      <ion-card>
        <ion-card-header>
          <ion-card-title>{{receta.title}}</ion-card-title>
          <img alt="foto de {{receta.title}}" src="{{receta.image}}">
        </ion-card-header>
        <ion-card-content *ngIf="recetasFavoritas.indexOf(receta) == recetaConIngredientes">ingredientes de
          {{receta.title}}

          <div class="ingredients">
            <ul *ngFor="let ingredient of receta.missedIngredients">
              <li>{{ingredient.original}} </li>
            </ul>
          </div>
        </ion-card-content>
        <ion-button *ngIf="queryDeRecetas?.results?.indexOf(receta) != recetaConIngredientes"
          (click)="muestraIngredientes(queryDeRecetas?.results?.indexOf(receta)!)">Mostrar ingredientes</ion-button>
        <ion-button *ngIf="queryDeRecetas?.results?.indexOf(receta) == recetaConIngredientes"
          (click)="ocultaIngredientes()">Ocultar ingredientes</ion-button>
        <ion-button (click)="buscarPorId(receta.id!, receta.image!)">Instrucciones paso a paso</ion-button>
        <ion-button (click)="eliminarDeRecetasFavoritas(receta.id!)">Eliminar de favoritas🚮</ion-button>
      </ion-card>
    </ion-card-content>
  </div>

  <!--mostrar solo si se va a agendar receta-->
  <!--solo template y metodo , falta toda lo demas-->
  <!--se ve al final de la receta horible , tal vez hay que canbiarlo por un alert-->
  <div class="add-event-wrapper">
  <div class="add-event-header">
    <div class="title">Agendar Receta</div>
     <ion-icon name="close-outline" class="close" (click)="mostrarAgendarReceta = false"></ion-icon>
  </div>

  <div class="add-event-body">
    <ion-input placeholder="Título de la receta" type="text"></ion-input>

    <ion-datetime placeholder="Seleccionar fecha"></ion-datetime>

    <ion-select placeholder="Seleccionar comida">
      <ion-select-option value="Desayuno">Desayuno (08:00)</ion-select-option>
      <ion-select-option value="Almuerzo">Almuerzo (12:00)</ion-select-option>
      <ion-select-option value="Merienda">Merienda (16:00)</ion-select-option>
      <ion-select-option value="Cena">Cena (20:00)</ion-select-option>
    </ion-select>
  </div>

  <div class="add-event-footer">
    <ion-button class="add-event-btn" (click)="agendarReceta()">Agendar Receta</ion-button>
  </div>
</div>




</ion-content>